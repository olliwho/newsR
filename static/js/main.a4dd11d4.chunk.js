(this.webpackJsonpnewsr=this.webpackJsonpnewsr||[]).push([[0],{106:function(e,t){},108:function(e,t){},134:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(64),s=n.n(c),i=(n(76),n(3)),o=n(4),l=n(6),u=n(5),m=n(7),p=(n(77),n(1)),d=n.n(p),h=n(17),f=n(65),v=n.n(f),b=n(66),g=n.n(b),E=function(){function e(t,n){Object(i.a)(this,e),this.name=void 0,this.email=void 0,this.name=t,this.email=n}return Object(o.a)(e,[{key:"toString",value:function(){return"".concat(this.name," <").concat(this.email,">")}}],[{key:"authorFromString",value:function(t){var n,a,r=new RegExp("(.*?) <(.*?)>").exec(t);return null===r?(n=t,a="placeholder.mail@srvr.at"):(n=r[1],a=r[2]),new e(n,a)}}]),e}(),w=function(){function e(t,n){Object(i.a)(this,e),this.citationLevel=void 0,this.text=void 0,this.citationLevel=n,this.text=t}return Object(o.a)(e,[{key:"isCitationStart",value:function(){return 0===this.citationLevel&&e.isCitationStart(this.text)}}],[{key:"isCitationStart",value:function(e){return void 0!==this.citationRegex.find((function(t){return t.test(e)}))}}]),e}();w.citationRegex=[new RegExp(/am(.*?)schrieb.*/,"i"),new RegExp(/on(.*?)wrote.*/,"i")];var y=function(){function e(t){Object(i.a)(this,e),this.db=void 0,this.db=t}return Object(o.a)(e,null,[{key:"instance",value:function(){var t=this;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.cache){n.next=2;break}return n.abrupt("return",e.cache);case 2:return n.abrupt("return",new Promise((function(n,a){var r=indexedDB.open("newsR");r.onerror=function(){a()},r.onsuccess=function(a){t.cache=new e(r.result),n(t.cache)},r.onupgradeneeded=e.upgrade})));case 3:case"end":return n.stop()}}),null,this)}},{key:"upgrade",value:function(e){var t=e.target.result,n=t.createObjectStore("over",{keyPath:"id"});n.createIndex("server-group",["server","group"],{unique:!1}),n.createIndex("server","server",{unique:!1}),n.createIndex("group","group",{unique:!1}),n.createIndex("articleNumber","articleNumber",{unique:!1}),n.createIndex("headers","headers",{unique:!1}),n.createIndex("metadata","metadata",{unique:!1});var a=t.createObjectStore("body",{keyPath:"id"});a.createIndex("server-id",["server","id"],{unique:!1}),a.createIndex("server","server",{unique:!1}),a.createIndex("body","articleNumber",{unique:!1})}}]),Object(o.a)(e,[{key:"persistOverArticle",value:function(e,t,n){var a,r,c;return d.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:a=this.db.transaction(["over"],"readwrite"),r=a.objectStore("over"),c={id:n.headers["MESSAGE-ID"],"server-group":[e,t],server:e,group:t,articleNumber:n.articleNumber,headers:JSON.stringify(n.headers),metadata:JSON.stringify(n.metadata)},r.add(c);case 4:case"end":return s.stop()}}),null,this)}},{key:"persistOverArticles",value:function(e,t,n){var a=this;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:n.forEach((function(n){return a.persistOverArticle(e,t,n)}));case 1:case"end":return r.stop()}}))}},{key:"retrieveOverArticles",value:function(e,t){var n=this;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a){var r=n.db.transaction("over").objectStore("over").index("server-group"),c=[];r.openCursor(IDBKeyRange.only([e,t])).onsuccess=function(e){var t=e.target.result;if(t){var n={articleNumber:t.value.articleNumber,headers:JSON.parse(t.value.headers),metadata:JSON.parse(t.value.metadata)};c.push(n),t.continue()}else a(c)}})));case 1:case"end":return a.stop()}}))}},{key:"persistBody",value:function(e,t){var n,a,r;return d.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:n=this.db.transaction(["body"],"readwrite"),a=n.objectStore("body"),r={id:t.messageId,server:e,body:JSON.stringify(t.body)},a.add(r);case 4:case"end":return c.stop()}}),null,this)}},{key:"retrieveBody",value:function(e,t){var n=this;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,r){n.db.transaction("body").objectStore("body").index("server-id").openCursor(IDBKeyRange.only([e,t])).onsuccess=function(e){var t=e.target.result;if(t){var n={messageId:t.value.id,body:JSON.parse(t.value.body)};a(n)}else a()}})));case 1:case"end":return a.stop()}}))}}]),e}();y.cache=void 0;var N=n(31),S=function(){function e(t,n,a,r,c,s,o,l,u){Object(i.a)(this,e),this.id=void 0,this.number=void 0,this.subject=void 0,this.date=void 0,this.author=void 0,this.hasattachment=void 0,this.size=void 0,this.references=[],this.directReference="",this.followUps=[],this.group=void 0,this.newsieClient=void 0,this.id=t,this.number=n,this.subject=a,this.date=r,this.author=c,this.hasattachment=s,this.size=o,this.group=l,this.newsieClient=u}return Object(o.a)(e,[{key:"setReferences",value:function(e){e.length<=0||(this.references=e.split(" "),this.directReference=this.references[this.references.length-1])}},{key:"contents",value:function(){var t,n,a;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d.a.awrap(y.instance());case 2:return t=r.sent,r.next=5,d.a.awrap(t.retrieveBody(this.group.host,this.id));case 5:if((n=r.sent)&&n.body){r.next=16;break}return r.next=9,d.a.awrap(this.newsieClient.body(this.id));case 9:if(!(n=r.sent.article).body){r.next=15;break}return r.next=13,d.a.awrap(t.persistBody(this.group.host,n));case 13:r.next=16;break;case 15:n.body=["[newsR: content not found and not cached]"];case 16:return a=e.bodyToContents(n.body),r.abrupt("return",{text:a.text,attachments:a.attachments});case 18:case"end":return r.stop()}}),null,this)}},{key:"postFollowup",value:function(e,t,n){return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(this.group.post(e,t,n,this.references.concat(this.id)));case 2:case"end":return a.stop()}}),null,this)}}],[{key:"ArticleFromNewsieArticle",value:function(t,n,a){if(!t||!t.headers||!t.articleNumber)return null;var r=v()(t.headers.DATE),c=E.authorFromString(Object(N.mimeWordsDecode)(t.headers.FROM)),s="",i="",o=0;"undefined"!==typeof t.metadata&&((o=Number(t.metadata[":bytes"]))>1e4&&(s="\ud83d\udcce"),i=o.toString()+" Bytes");var l=new e(t.headers["MESSAGE-ID"],t.articleNumber,Object(N.mimeWordsDecode)(t.headers.SUBJECT),r,c,s,i,n,a);return l.setReferences(t.headers.REFERENCES),l}},{key:"stripStartEndCitationsFromContents",value:function(t){if(!(t.length<1)){if(t[0].isCitationStart()){for(var n=1;n<t.length&&(0!==t[n].citationLevel||0===t[n].text.length);)n++;t.splice(0,n)}for(var a=null,r=t.length-1;r>=0;r--){var c=t[r];if(0===c.citationLevel&&!e.isOnlyWhitespace(c.text))break;if(c.isCitationStart()){a=r;break}}null!==a&&t.splice(a,t.length-a)}}},{key:"isOnlyWhitespace",value:function(t){return e.whitespaceRegex.test(t)}},{key:"bodyToContents",value:function(e){var t=[],n=[];if("This is a multi-part message in MIME format."===e[0]){var a="MIME-Version: 1.0\n"+"Content-Type: multipart/mixed; boundary=".concat(e[1].substring(2),"\n")+"\n",r=g()(a+e.join("\n"));e=r.childNodes.filter((function(e){return"text/plain"===e.contentType.value})).map((function(e){return new TextDecoder("utf-8").decode(e.content)})).join("\n").split("\n"),n=r.childNodes.filter((function(e){return"text/plain"!==e.contentType.value})).map((function(e){var t=e.raw.substring(e.raw.lastIndexOf("\n\n")).replace(/\s/g,"");return{contentType:e.contentType.value,name:e.contentType.params.name,dataUrl:"data:".concat(e.contentType.value,";base64,").concat(t)}}))}return e?(e.forEach((function(e){for(var n=0;n<e.length&&">"===e[n];)n++;e=e.substring(n,e.length),t.push(new w(e,n))})),{text:t,attachments:n}):{text:t,attachments:n}}},{key:"parseQuote",value:function(e,t){for(var n="On ".concat(t.date.format("YYYY-MM-DD HH:mm"),", ").concat(t.author.name," wrote:\n"),a=0;a<e.length;a++){var r=e[a];if("-- "===r.text)break;n+=">".repeat(r.citationLevel+1)+" ".concat(r.text,"\n")}return n}}]),e}();S.whitespaceRegex=new RegExp(/^$|\s+/);var x=n(10),k=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading-container"},r.a.createElement("div",{className:"loading"},r.a.createElement(x.a,{icon:"spinner",spin:!0}),"\xa0\xa0Loading ..."))}}]),t}(r.a.Component),j=n(21),C=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.article;return r.a.createElement("div",{className:"article-detail-author"},e.date.format("YYYY-MM-DD HH:mm")," by ",e.author.name,r.a.createElement(j.a,{queries:{small:"(max-width: 47rem)",large:"(min-width: 47.1rem)"}},(function(e){return r.a.createElement(a.Fragment,null,e.small&&r.a.createElement("br",null),e.large&&r.a.createElement(a.Fragment,null,"\xa0"))})),r.a.createElement("a",{href:"mailto:".concat(e.author.email)},e.author.email))}}]),t}(r.a.Component),O=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.children;return r.a.createElement(j.a,{query:"(max-width: 47rem)"},(function(e){return e?r.a.createElement("div",{className:"icon-button"},r.a.createElement(x.a,{icon:t})):r.a.createElement("div",{className:"icon-button"},r.a.createElement(x.a,{icon:t}),"\xa0\xa0",n)}))}}]),t}(r.a.Component),I=n(12),P=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isContentLoading:!1,contents:[],attachments:[]},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadContent();case 1:case"end":return e.stop()}}),null,this)}},{key:"componentDidUpdate",value:function(e){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.props.article===e.article&&this.props.showContent===e.showContent||this.loadContent();case 1:case"end":return t.stop()}}),null,this)}},{key:"loadContent",value:function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props.showContent){t.next=2;break}return t.abrupt("return");case 2:return this.setState({isContentLoading:!0,contents:[],attachments:[]}),t.next=5,d.a.awrap(this.props.article.contents());case 5:e=t.sent,this.setState({isContentLoading:!1,contents:e.text,attachments:e.attachments});case 7:case"end":return t.stop()}}),null,this)}},{key:"nestContent",value:function(e,t){return 0===e?t:r.a.createElement("div",{className:"nested-content"},this.nestContent(e-1,t))}},{key:"render",value:function(){var e=this,n=this.props,a=n.article,c=n.showContent,s=n.onClickHeader,i=n.hasSimpleHeader,o=n.groupName,l=this.state,u=l.contents,m=l.attachments,p=l.isContentLoading;return r.a.createElement("div",{className:"article-detail"},r.a.createElement("div",{className:"header",onClick:function(){return s&&s(a.id)}},i&&r.a.createElement("div",{className:"article-detail-chevron"},c?r.a.createElement(x.a,{icon:"chevron-down"}):r.a.createElement(x.a,{icon:"chevron-right"})),i?r.a.createElement(C,{article:a}):r.a.createElement("div",null,r.a.createElement("h1",{className:"article-detail-title"},a.subject),r.a.createElement(C,{article:a})),r.a.createElement("div",{className:"article-buttons"},r.a.createElement("div",{className:"article-button"},r.a.createElement("a",{href:"mailto:".concat(a.author.email,"?subject=").concat(encodeURIComponent(a.subject),"&body=").concat(t.createMailBody(u,a)),className:"no-link",onClick:function(e){return e.stopPropagation()}},r.a.createElement(O,{icon:"envelope"},"Reply"))),r.a.createElement("div",{className:"article-button"},r.a.createElement(I.b,{to:"/post/".concat(o,"/").concat(a.number),className:"no-link"},r.a.createElement(O,{icon:"hand-point-right"},"Follow Up"))))),p&&r.a.createElement(k,null),c&&r.a.createElement("div",{className:"article-detail-content"},u.map((function(t,n){return r.a.createElement("div",{key:n},e.nestContent(t.citationLevel,t.text+"\n"))})),m.length>0&&r.a.createElement("div",null,r.a.createElement("p",null,"Attachments:"),r.a.createElement("ul",{className:"attachments"},m.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("a",{href:e.dataUrl,download:e.name},["image/png","image/gif","image/jpeg","image/svg+xml"].includes(e.contentType)?r.a.createElement("img",{src:e.dataUrl,alt:e.name}):r.a.createElement("span",null,e.name)))}))))))}}],[{key:"createMailBody",value:function(e,t){var n=S.parseQuote(e,t),a=localStorage.getItem("signature");return encodeURIComponent(a?"".concat(n,"\n\n-- \n").concat(a):n)}}]),t}(r.a.Component);P.defaultProps=void 0,P.defaultProps={onClickHeader:null,hasSimpleHeader:!1};var R=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showContent,n=e.article,a=e.onClick,c=e.baseUrl,s=e.groupName;return r.a.createElement("li",{key:n.id},r.a.createElement(P,{article:n,baseUrl:c,groupName:s,showContent:t,onClickHeader:function(e){return a(e)},hasSimpleHeader:!0}),t&&r.a.createElement("div",null,r.a.createElement(A,{articles:n.followUps,baseUrl:c,groupName:s}),r.a.createElement("div",{className:"collapsible-line",onClick:function(){return a(n.id)}})))}}]),t}(r.a.Component),A=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={forceHideIds:[]},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleArticleClick",value:function(e){var t=this.state.forceHideIds;t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.setState({forceHideIds:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.articles,a=t.baseUrl,c=t.groupName,s=this.state.forceHideIds;return r.a.createElement("div",{className:"collapsible-thread-list"},r.a.createElement("ul",null,n.map((function(t){return r.a.createElement(R,{baseUrl:a,groupName:c,key:t.id,article:t,showContent:!s.includes(t.id),onClick:function(t){return e.handleArticleClick(t)}})}))))}}]),t}(r.a.Component),U=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.article,n=e.match,a="/groups/".concat(n.params.name,"/");return null===t?"Article not found!":r.a.createElement("div",{className:"thread-detail"},r.a.createElement(h.Helmet,null,r.a.createElement("title",null,"newsR - ",null===t||void 0===t?void 0:t.subject)),r.a.createElement(P,{baseUrl:a,groupName:n.params.name,article:t,showContent:!0}),r.a.createElement(A,{baseUrl:a,groupName:n.params.name,articles:null===t||void 0===t?void 0:t.followUps}))}}]),t}(r.a.Component),T=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"sidebar-content"},r.a.createElement("div",{className:"sidebar-content-sidebar"},this.props.sidebar),r.a.createElement("div",{className:"sidebar-content-content-1"},this.props.content1),r.a.createElement("div",{className:"sidebar-content-content-2"},this.props.content2))}}]),t}(r.a.Component),q=n(24),D=n(42),_=n.n(D),G=n(32),L=function(){function e(t,n,a,r){Object(i.a)(this,e),this.name=void 0,this.description=void 0,this.host=void 0,this.newsieClient=void 0,this.name=t,this.description=n,this.newsieClient=r,this.host=a}return Object(o.a)(e,[{key:"article",value:function(e){var t,n,a;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d.a.awrap(this.newsieClient.over("".concat(e,"-").concat(e)));case 2:return t=r.sent,r.next=5,d.a.awrap(y.instance());case 5:return n=r.sent,r.next=8,d.a.awrap(n.persistOverArticles(this.host,this.name,t.articles));case 8:return a=t.articles[0],r.abrupt("return",S.ArticleFromNewsieArticle(a,this,this.newsieClient));case 10:case"end":return r.stop()}}),null,this)}},{key:"threads",value:function(){var e,t,n,a,r,c,s,i=this;return d.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,d.a.awrap(this.newsieClient.group(this.name));case 2:if(0!==(e=o.sent.group).number){o.next=5;break}return o.abrupt("return",[]);case 5:return o.next=7,d.a.awrap(this.newsieClient.over("".concat(e.low,"-").concat(e.high)));case 7:return t=o.sent,o.next=10,d.a.awrap(y.instance());case 10:return n=o.sent,o.next=13,d.a.awrap(n.persistOverArticles(this.host,this.name,t.articles));case 13:return o.next=15,d.a.awrap(n.retrieveOverArticles(this.host,this.name));case 15:return a=o.sent,r=a.sort((function(e,t){return e.articleNumber-t.articleNumber})).map((function(e){return S.ArticleFromNewsieArticle(e,i,i.newsieClient)})),c={},s=[],r.forEach((function(e){c[e.id]=e,0===e.references.length?s.push(e):c[e.directReference]&&c[e.directReference].followUps.push(e)})),s.sort((function(e,t){return t.date.unix()-e.date.unix()})),o.abrupt("return",s);case 22:case"end":return o.stop()}}),null,this)}},{key:"post",value:function(e,t,n,a){var r,c,s,i;return d.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,d.a.awrap(this.newsieClient.post());case 2:if(340===(r=o.sent).code){o.next=7;break}throw c="Cannot post: Posting not permitted",console.error(c),new Error(c);case 7:return s={headers:{From:e.toString(),Newsgroups:this.name,Subject:t,"User-Agent":"newsR/".concat(G.version)},body:n},a&&s.headers&&(s.headers.References=a.join(" ")),o.next=11,d.a.awrap(r.send(s));case 11:if(240===o.sent.code){o.next=16;break}throw i="Posting failed: Posting failed",console.error(i),new Error(i);case 16:case"end":return o.stop()}}),null,this)}}]),e}(),H=function(){function e(t,n,a,r){var c=this;Object(i.a)(this,e),this._socket=void 0,this._host=void 0,this._port=void 0,this._queue=void 0,this.onCloseCallback=void 0,this.connect=function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){c._socket.addEventListener("open",(function(){c.write("NNTPCONNECT ".concat(c._host," ").concat(c._port)),c._addSocketHandlers(),e(c._socket)}))})));case 1:case"end":return e.stop()}}))},this.disconnect=function(){c._socket.close(),c._queue.forEach((function(e){return e.reject(new Error("Disconnected from server"))})),c._queue=[]},this.write=function(e){c._socket.send(e)},this.addCallback=function(e,t,n){c._queue.push({callback:e,resolve:t,reject:n})},this._addSocketHandlers=function(){c._socket.onmessage=function(e){var t=c._queue[0],n=t.callback(e.data);c._queue.shift(),t.resolve(n)},c._socket.onerror=function(e){throw c._queue.forEach((function(t){return t.reject(e)})),c.disconnect(),e},c._socket.onclose=function(){console.error("WS: Connection closed"),c._queue.forEach((function(e){return e.reject(new Error("Connection closed"))})),c.onCloseCallback()}},this._socket=new WebSocket("wss://newsr-ws4nntp.herokuapp.com"),this._host=t,this._port=n,this._queue=[]}return Object(o.a)(e,[{key:"setOnCloseCallback",value:function(e){this.onCloseCallback=e}}]),e}(),M=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e)))._wsConnection=void 0,n.connect=function(){var e,t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(n._wsConnection.connect());case 2:return e=a.sent,a.next=5,d.a.awrap(n.sendData(D.Command.GREETING));case 5:return t=a.sent,a.abrupt("return",Object(q.a)({},t,{socket:e}));case 7:case"end":return a.stop()}}))},n.disconnect=function(){return n._wsConnection.disconnect()},n.sendData=function(e,t){return new Promise((function(e,a){n._wsConnection.addCallback((function(e){return JSON.parse(e)}),e,a),t&&n._wsConnection.write(t)})).then((function(e){return e.code<400?e:Promise.reject(e)}))};var a=e.host,r=e.port,c=void 0===r?119:r,s=e.tlsPort,o=void 0!==s&&s,m=e.tlsOptions,p=void 0===m?{}:m;return n._wsConnection=new H(a,c,o,p),n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"setOnCloseCallback",value:function(e){this._wsConnection.setOnCloseCallback(e)}}]),t}(_.a),W=function(){function e(t,n){Object(i.a)(this,e),this.host=void 0,this.port=void 0,this.newsieClient=void 0,this.host=t,n&&(this.port=n),this.newsieClient=this.initWsNewsieClient(this.host,this.port)}return Object(o.a)(e,[{key:"initWsNewsieClient",value:function(e,t){var n=this,a={host:e};return t&&!isNaN(t)&&(a.port=t),this.newsieClient=new M(a),this.newsieClient.setOnCloseCallback((function(){console.log("WS: Reconnect!"),n.initWsNewsieClient(e,t),n.connectAndVerifyNewsieClient()})),this.newsieClient}},{key:"connectAndVerifyNewsieClient",value:function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(this.newsieClient.connect());case 2:if(200===(e=t.sent).code){t.next=5;break}throw Error("No connection to server.");case 5:return t.next=7,d.a.awrap(this.newsieClient.capabilities());case 7:if(t.sent.capabilities.LIST.includes("NEWSGROUPS")){t.next=10;break}throw Error("Server does't have the required LIST NEWSGROUPS capability.");case 10:return t.abrupt("return",e.socket);case 11:case"end":return t.stop()}}),null,this)}},{key:"getGroupByName",value:function(e){var t,n=this;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(this.newsieClient.listNewsgroups(e));case 2:if(1===(t=a.sent).newsgroups.length){a.next=5;break}return a.abrupt("return",null);case 5:return a.abrupt("return",t.newsgroups.map((function(e){var t="undefined"===typeof e.description?"":e.description;return new L(e.name,t,n.host,n.newsieClient)}))[0]);case 6:case"end":return a.stop()}}),null,this)}},{key:"groups",value:function(){var e,t,n,a=this;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=localStorage.getItem("nntpGroupPrefix"),t=e||void 0,r.next=4,d.a.awrap(this.newsieClient.listNewsgroups(t));case 4:return n=r.sent,r.abrupt("return",n.newsgroups.map((function(e){var t="undefined"===typeof e.description?"":e.description;return new L(e.name,t,a.host,a.newsieClient)})));case 6:case"end":return r.stop()}}),null,this)}}],[{key:"instance",value:function(){var t,n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(null!==this.server){a.next=8;break}if(t=localStorage.getItem("nntpUrl"),n=localStorage.getItem("nntpPort"),t&&n){a.next=5;break}throw new Error("Server URl or Server Port not specified.");case 5:return this.server=new e(t,parseInt(n)),a.next=8,d.a.awrap(this.server.connectAndVerifyNewsieClient());case 8:return a.abrupt("return",this.server);case 9:case"end":return a.stop()}}),null,this)}},{key:"resetServer",value:function(){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.server=null,t.next=3,d.a.awrap(e.instance());case 3:case"end":return t.stop()}}),null,this)}}]),e}();W.server=null,W.keepaliveIntervalReference=null;var F=n(9);function B(){var e=localStorage.getItem("subscribedGroups");return e?JSON.parse(e):[]}function Y(e,t){var n=J(e);n.find((function(t){return t===e}))||localStorage.setItem(e,JSON.stringify(n.concat(t)))}function J(e){var t=localStorage.getItem(e);return t?JSON.parse(t):[]}function z(e){var t=e.entry,n=Object(F.g)();return r.a.createElement("div",{onClick:function(){t.replace&&t.url&&n.replace(t.url),t.onPress&&t.onPress(t),!t.replace&&t.url&&n.push(t.url)}},r.a.createElement("div",{className:"list-entry "+t.class},t.icon&&r.a.createElement("div",{className:"float"},r.a.createElement(x.a,{icon:t.icon})),r.a.createElement("div",{className:"list-entry-text"},r.a.createElement("span",{className:"title"+(t.bold?" bold":"")},t.title),r.a.createElement("br",null),r.a.createElement("span",{className:"subtitle"+(t.bold?" bold":"")},t.subtitle))))}function V(e){var t=e.data;return r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement(z,{key:t,entry:e})})))}function Q(e){var t=e.entry,n=e.columns,a=Object(F.g)();var c=n.map((function(e,n){if(null!=t&&null!=t.referenceObject){var a="",c="";return 1===e.type?a=t.referenceObject[e.nativeName].toString():2===e.type?a=t.referenceObject[e.nativeName].format("YYYY-MM-DD HH:mm"):3===e.type?(a=t.referenceObject[e.nativeName],c="size"):4===e.type?(a=t.referenceObject[e.nativeName],c="attachment"):a=t.referenceObject[e.nativeName],""!==c?r.a.createElement("td",{className:c},a):r.a.createElement("td",null,a)}return r.a.createElement("td",null)}));return r.a.createElement("tr",{onClick:function(){t.onPress&&t.onPress(t),t.url&&a.push(t.url)},className:"table-entry"+(t.bold?" bold":"")+(t.class?" "+t.class:"")},c)}var K=n(11),$=function e(t,n,a){Object(i.a)(this,e),this.name=void 0,this.type=void 0,this.nativeName=void 0,this.name=t,this.type=n,this.nativeName=a};function X(e){var t=e.data,n=e.columns,a=e.urlColumn,c=e.onPressSort,s=e.sortColumn,i=e.ascending;var o=n.map((function(e,t){var n=e.name,a=e.nativeName,o=e.nativeName===s?i?r.a.createElement(x.a,{icon:K.e}):r.a.createElement(x.a,{icon:K.c}):r.a.createElement(x.a,{icon:K.l});return r.a.createElement("th",{id:a,onClick:function(){return function(e){var t=localStorage.getItem("ascending"),n=!t||JSON.parse(t),a=localStorage.getItem("sortColumn")||"";e!==a?(localStorage.setItem("sortColumn",e),localStorage.setItem("ascending","true"),c(e,!0)):(localStorage.setItem("ascending",JSON.stringify(!n)),c(a,!n))}(a)}},n," ",o)})),l=null;return l=""===s?t.map((function(e,t){return r.a.createElement(Q,{key:t,entry:e,columns:n,urlColumn:a})})):t.sort((function(e,t){return e.referenceObject[s]>t.referenceObject[s]?i?1:-1:i?-1:1})).map((function(e,t){return r.a.createElement(Q,{key:t,entry:e,columns:n,urlColumn:a})})),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,o)),r.a.createElement("tbody",null,l))}var Z=n(69),ee=n.n(Z);function te(e){var t=e.searchBar;return r.a.createElement("div",{className:"app-grid-header"},r.a.createElement(ne,null),r.a.createElement("div",{className:"search-bar"},r.a.createElement(ae,{name:e.name,subtitle:e.subtitle,url:e.url}),t&&t.filter&&r.a.createElement("input",{className:"search",type:"text",placeholder:"Search Message Headers\u2026",onChange:function(e){return t.filter(e.target.value.toLowerCase())}})),e.buttons&&e.buttons.map((function(e,t){return r.a.createElement(re,{key:t,icon:e.icon,name:e.name,url:e.url,onPress:e.onPress})})))}function ne(){return r.a.createElement("div",{className:"logo"},r.a.createElement(I.b,{className:"no-link",to:"/"},r.a.createElement("img",{src:ee.a,alt:"Logo"})))}function ae(e){return e.url?r.a.createElement(I.b,{className:"no-link",to:"".concat(e.url)},r.a.createElement("h2",null,e.name),e.subtitle&&r.a.createElement("h3",{className:"heading-subtitle"},e.subtitle)):r.a.createElement("h2",null,e.name)}function re(e){var t=e.icon,n=e.name,a=e.url,c=e.onPress;return a?r.a.createElement(I.b,{to:a,className:"no-link"},r.a.createElement("div",{className:"icon"},r.a.createElement(O,{icon:t},n))):c?r.a.createElement("div",{className:"icon",onClick:function(){return c()}},r.a.createElement(O,{icon:t},n)):r.a.createElement("div",{className:"icon"},r.a.createElement(O,{icon:t},n))}function ce(){return r.a.createElement("div",{className:"app-grid-footer"},r.a.createElement("span",{className:"app-name"},"newsR ",G.version),r.a.createElement("a",{href:"https://github.com/olliwho/newsR",className:"no-link github-link"},r.a.createElement(x.a,{icon:["fab","github"]}),"\xa0\xa0Github"))}var se=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,group:null,groups:[],subscribedGroupsName:[],threads:[],filteredThreads:[],readArticles:[],activeArticle:"",sortColumn:"",ascending:!0},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e,t,n,a,r,c,s,i,o,l,u;return d.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e=localStorage.getItem("nntpUrl"),t=localStorage.getItem("nntpPort"),e&&t){m.next=4;break}return m.abrupt("return");case 4:return m.next=6,d.a.awrap(W.instance());case 6:return n=m.sent,m.next=9,d.a.awrap(n.groups());case 9:return a=m.sent,r=B(),m.next=13,d.a.awrap(n.getGroupByName(this.props.match.params.name));case 13:if(null!==(c=m.sent)){m.next=17;break}return this.setState({loading:!1,group:null,groups:a,subscribedGroupsName:r}),m.abrupt("return");case 17:return m.next=19,d.a.awrap(c.threads());case 19:s=m.sent,i=J(c.name),o=localStorage.getItem("ascending"),l=!o||JSON.parse(o),u=localStorage.getItem("sortColumn")||"",this.setState({loading:!1,group:c,groups:a,subscribedGroupsName:r,threads:s,readArticles:i,filteredThreads:s,sortColumn:u,ascending:l});case 25:case"end":return m.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=localStorage.getItem("nntpUrl"),n=localStorage.getItem("nntpPort");if(!t||!n)return r.a.createElement(F.a,{to:"/settings"});var c=this.props.match,s=this.state,i=s.group,o=s.loading,l=s.threads,u=s.filteredThreads,m=null===i?[]:u.map((function(t){return{bold:!e.state.readArticles.find((function(e){return e===t.id})),class:e.state.activeArticle===t.id?"active-article":"",url:"".concat(c.url,"/").concat(t.number),onPress:function(){Y(i.name,t.id),e.setState({readArticles:e.state.readArticles.concat(t.id),activeArticle:t.id})},referenceObject:t}})),p=null===i?[]:u.map((function(t){return{title:t.subject,subtitle:"".concat(t.author.name," - ").concat(t.date.format("DD.MM.YY HH:mm"),"  ").concat(t.hasattachment," "),url:"".concat(c.url,"/").concat(t.number),bold:!e.state.readArticles.find((function(e){return e===t.id})),onPress:function(){Y(i.name,t.id),e.setState({readArticles:e.state.readArticles.concat(t.id)})}}})),d=[{name:"Write",icon:"pencil-alt",url:null===i?"":"/post/".concat(i.name)},{name:"Startpage",icon:"home",url:"/"}],f=[{name:"Write",icon:"pencil-alt",url:null===i?"":"/post/".concat(i.name)},{name:"Back",icon:"arrow-left",url:null===i?"":"/groups/".concat(i.name)},{name:"Startpage",icon:"home",url:"/"}],v=null===i?c.params.name:i.name,b=r.a.createElement(te,{name:v,searchBar:{filter:function(t){var n=l.filter((function(e){return e.subject.toLowerCase().includes(t)||e.author.name.toLowerCase().includes(t)}));e.setState({filteredThreads:n})}},url:c.url,buttons:d}),g=r.a.createElement(te,{name:v,url:c.url,buttons:f}),E=function(t){return e.state.groups.filter((function(t){return function(t){return e.state.subscribedGroupsName.includes(t)}(t.name)}))};return r.a.createElement("div",{className:"app-grid"},r.a.createElement(h.Helmet,null,r.a.createElement("title",null,"newsR - ",v)),r.a.createElement(F.d,null,r.a.createElement(F.b,{path:"".concat(c.path,"/:number")},r.a.createElement(j.a,{queries:{small:"(max-width: 47rem)",large:"(min-width: 47.1rem)"}},(function(e){return r.a.createElement(a.Fragment,null,e.small&&g,e.large&&b)}))),r.a.createElement(F.b,{path:"".concat(c.path)},b)),r.a.createElement("div",{className:"app-grid-body"},o?r.a.createElement(k,null):null===i?"Group not found!":r.a.createElement(j.a,{query:"(max-width: 47rem)"},(function(t){return t?r.a.createElement(F.d,null,r.a.createElement(F.b,{path:"".concat(c.path,"/:number"),render:function(e){return r.a.createElement(U,Object.assign({},e,{group:i,article:l.find((function(t){return t.number===parseInt(e.match.params.number)}))||null}))}}),r.a.createElement(F.b,{path:"".concat(c.path)},r.a.createElement(V,{data:p}))):r.a.createElement(T,{sidebar:0===e.state.subscribedGroupsName.length?r.a.createElement("div",{className:"no-thread"},r.a.createElement("div",{className:"no-thread-text"},"Welcome to newsR - ",r.a.createElement(I.b,{to:"/groups-manage"},"Subscribe to a newsgroup")," to get started!")):r.a.createElement(V,{data:E().map((function(t){return{title:t.name,subtitle:t.description,url:"/groups/".concat(t.name),bold:i.name===t.name,class:i.name===t.name?"active-group":"",onPress:function(){e.componentDidMount()}}}))}),content1:r.a.createElement(X,{onPressSort:function(t,n){return e.setState({sortColumn:t,ascending:n})},sortColumn:e.state.sortColumn,ascending:e.state.ascending,data:m,columns:[new $("Subject",0,"subject"),new $("Author",1,"author"),new $("Date",2,"date"),new $("Size",3,"size"),new $("\ud83d\udcce",4,"hasattachment")],urlColumn:"url"}),content2:r.a.createElement(F.d,null,r.a.createElement(F.b,{path:"".concat(c.path,"/:number"),render:function(e){return r.a.createElement(U,Object.assign({},e,{group:i,article:l.find((function(t){return t.number===parseInt(e.match.params.number)}))||null}))}}),r.a.createElement(ie,{url:c.path,groupName:i.name}))})}))),r.a.createElement(ce,null))}}]),t}(r.a.Component);function ie(e){return r.a.createElement(F.b,{path:e.url},r.a.createElement("div",{className:"no-thread"},r.a.createElement("div",{className:"no-thread-text"},"Welcome to "+e.groupName),r.a.createElement("div",{className:"no-thread-text"},"Please select a thread or ",r.a.createElement(I.b,{to:"/post/".concat(e.groupName)},"write")," a new post!")))}var oe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,sending:!1,done:!1,group:null,article:null,author:"",subject:"",content:"",email:""},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e,n,a,r,c,s,i,o,l,u,m;return d.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e=localStorage.getItem("nntpUrl"),n=localStorage.getItem("nntpPort"),e&&n){p.next=4;break}return p.abrupt("return");case 4:return a=this.props.match,p.next=7,d.a.awrap(W.instance());case 7:return r=p.sent,p.next=10,d.a.awrap(r.getGroupByName(a.params.name));case 10:if(c=p.sent,this.setState({author:localStorage.getItem("authorName")||"",email:localStorage.getItem("authorEmail")||""}),c){p.next=15;break}return this.setState({group:null,article:null,loading:!1}),p.abrupt("return");case 15:if(s=localStorage.getItem("signature"),i=s?"\n\n-- \n".concat(s):"",a.params.number){p.next=20;break}return this.setState({group:c,content:i,article:null,loading:!1}),p.abrupt("return");case 20:return p.next=22,d.a.awrap(c.article(parseInt(a.params.number)));case 22:if(o=p.sent){p.next=26;break}return this.setState({group:null,article:null,loading:!1}),p.abrupt("return");case 26:return l=o.subject.startsWith(t.replyStr)?o.subject:t.replyStr+o.subject,p.next=29,d.a.awrap(o.contents());case 29:u=p.sent,m=S.parseQuote(u.text,o),i=s?"".concat(m,"\n\n-- \n").concat(s):m,this.setState({group:c,article:o,subject:l,content:i,loading:!1});case 33:case"end":return p.stop()}}),null,this)}},{key:"timeout",value:function(e){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,e)})));case 1:case"end":return t.stop()}}))}},{key:"send",value:function(e){var t,n,a,r,c,s,i,o;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.preventDefault(),this.setState({sending:!0}),t=this.state,n=t.group,a=t.article,r=t.subject,c=t.author,s=t.email,i=t.content,n){l.next=6;break}return console.error("Error: cannot send, group not found."),l.abrupt("return");case 6:if(o=new E(c,s),!a){l.next=12;break}return l.next=10,d.a.awrap(a.postFollowup(o,r,[i]));case 10:l.next=14;break;case 12:return l.next=14,d.a.awrap(null===n||void 0===n?void 0:n.post(o,r,[i]));case 14:return this.setState({sending:!1,done:!0}),l.next=17,d.a.awrap(this.timeout(1e3));case 17:this.props.history.goBack();case 18:case"end":return l.stop()}}),null,this)}},{key:"render",value:function(){var e=this,n=localStorage.getItem("nntpUrl"),a=localStorage.getItem("nntpPort");if(!n||!a)return r.a.createElement(F.a,{to:"/settings"});var c=this.props.match,s=this.state,i=s.group,o=s.article,l=s.loading,u=s.subject,m=s.author,p=s.email,d=s.content,f=s.sending,v=s.done,b=null===i?c.params.name:i.name,g="";return o&&(b+=" ".concat(t.replyStr+o.subject),g=o.date.format("YYYY-MM-DD HH:mm")+" by "+o.author.name),r.a.createElement("div",{className:"app-grid"},r.a.createElement(h.Helmet,null,r.a.createElement("title",null,"newsR - ",b)),r.a.createElement(te,{name:b,subtitle:g,url:c.url}),r.a.createElement("div",{className:"app-grid-body"},l?r.a.createElement(k,null):null===i?"Group not found":r.a.createElement("form",{className:"post-article",acceptCharset:"UTF-8",onSubmit:function(t){return e.send(t)}},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{required:!0,name:"author",type:"text",placeholder:"Name",value:m,onChange:function(t){e.setState({author:t.currentTarget.value})}}),r.a.createElement("input",{required:!0,name:"email",type:"email",placeholder:"email@provider.tld",value:p,onChange:function(t){e.setState({email:t.currentTarget.value})}})),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{required:!0,name:"subject",type:"text",placeholder:"Subject: \u2026",value:u,onChange:function(t){e.setState({subject:t.currentTarget.value})}})),o&&r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{name:"followup to",type:"hidden",value:null===o||void 0===o?void 0:o.references.concat(o.id).join(" "),readOnly:!0})),r.a.createElement("div",{className:"input-group"},r.a.createElement("textarea",{required:!0,value:d,onChange:function(t){e.setState({content:t.currentTarget.value})}})),r.a.createElement("div",{className:"input-group"},r.a.createElement("button",{className:"submit",type:"submit",disabled:f||v},f?r.a.createElement(x.a,{icon:"spinner",spin:!0}):v?"Sent!":"Send"),r.a.createElement("button",{className:"back",type:"reset",onClick:function(){return e.props.history.goBack()}},"Go back")))))}}]),t}(r.a.Component);oe.replyStr="Re: ";var le=Object(F.h)(oe),ue=n(43);function me(){var e=localStorage.getItem("nntpUrl"),t=localStorage.getItem("nntpPort");return e&&t?function(){var e=Object(a.useState)({groups:[],filterText:"",subscribedGroupsName:[]}),t=Object(ue.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!0),i=Object(ue.a)(s,2),o=i[0],l=i[1];Object(a.useEffect)((function(){!function(){var e,t,a;d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return l(!0),r.next=3,d.a.awrap(W.instance());case 3:return e=r.sent,r.next=6,d.a.awrap(e.groups());case 6:t=r.sent,a=B(),c(Object(q.a)({},n,{groups:t,subscribedGroupsName:a})),l(!1);case 10:case"end":return r.stop()}}))}()}),[]);var u=function(e){f(e.title)?function(e){var t=B();t.find((function(t){return t===e}))&&localStorage.setItem("subscribedGroups",JSON.stringify(t.filter((function(t){return t!==e}))))}(e.title):function(e){var t=B();t.find((function(t){return t===e}))||localStorage.setItem("subscribedGroups",JSON.stringify(t.concat(e)))}(e.title);var t=B();c(Object(q.a)({},n,{subscribedGroupsName:t}))},m=function(e){return f(e.name)?"check-square":"square"},p=[{name:"Settings",icon:"tools",url:"/settings"},{name:"Manage Groups",icon:"cog",url:"/groups-manage"}],f=function(e){return n.subscribedGroupsName.includes(e)},v=function(e){return n.groups.filter((function(t){return function(e){var t=n.filterText;return""===t||(e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t))}(t)&&(!0!==e||f(t.name))}))},b=localStorage.getItem("nntpUrl"),g=null!==b?b:"";return r.a.createElement("div",{className:"app-grid"},r.a.createElement(h.Helmet,null,r.a.createElement("title",null,"newsR - ",g)),r.a.createElement(te,{name:g,searchBar:{filter:function(e){c(Object(q.a)({},n,{filterText:e}))}},buttons:p}),r.a.createElement("div",{className:"app-grid-body"},o?r.a.createElement(k,null):r.a.createElement(F.d,null,r.a.createElement(F.b,{path:"/settings"}),r.a.createElement(F.b,{path:"/groups"},r.a.createElement(V,{data:v().map((function(e){return{title:e.name,subtitle:e.description,url:"/groups/".concat(e.name)}}))})),r.a.createElement(F.b,{path:"/groups-manage"},r.a.createElement("div",{className:"no-thread-text"},"Subscribe and unsubscribe from newsgroups."),r.a.createElement(V,{data:v().map((function(e){return{title:e.name,subtitle:e.description,url:"",onPress:u,icon:m(e)}}))})),r.a.createElement(F.b,{path:"/"},0===n.subscribedGroupsName.length?r.a.createElement("div",{className:"no-thread"},r.a.createElement("div",{className:"no-thread-text"},"Welcome to newsR - ",r.a.createElement(I.b,{to:"/groups-manage"},"Subscribe to a newsgroup")," to get started!")):r.a.createElement(V,{data:v(!0).map((function(e){return{title:e.name,subtitle:e.description,url:"/groups/".concat(e.name)}}))})))),r.a.createElement(ce,null))}():r.a.createElement(F.a,{to:"/settings"})}var pe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,setting:!1,done:!1,author:"",email:"",url:"",port:"",groupPrefix:"",signature:""},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({author:localStorage.getItem("authorName")||"",email:localStorage.getItem("authorEmail")||"",url:localStorage.getItem("nntpUrl")||"news.tugraz.at",port:localStorage.getItem("nntpPort")||"119",groupPrefix:localStorage.getItem("nntpGroupPrefix")||"tu-graz*",signature:localStorage.getItem("signature")||"",loading:!1});case 1:case"end":return e.stop()}}),null,this)}},{key:"setServer",value:function(e){var t,n,a,r,c,s,i;return d.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.preventDefault(),this.setState({setting:!0}),t=this.state,n=t.author,a=t.email,r=t.url,c=t.port,s=t.groupPrefix,i=t.signature,r&&c&&s){o.next=6;break}return console.error("Error: cannot set, please fill all fields."),o.abrupt("return");case 6:return r!==localStorage.getItem("nntpUrl")&&localStorage.clear(),localStorage.setItem("authorName",n),localStorage.setItem("authorEmail",a),localStorage.setItem("nntpUrl",r),localStorage.setItem("nntpPort",c),localStorage.setItem("nntpGroupPrefix",s),localStorage.setItem("signature",i),o.next=15,d.a.awrap(W.resetServer());case 15:this.setState({setting:!1,done:!0}),this.props.history.push("/");case 17:case"end":return o.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.setting,c=t.done,s=t.author,i=t.email,o=t.url,l=t.port,u=t.groupPrefix,m=t.signature;return r.a.createElement("div",{className:"app-grid"},r.a.createElement(h.Helmet,null,r.a.createElement("title",null,"newsR - Settings")),r.a.createElement(te,{name:"Settings"}),r.a.createElement("div",{className:"app-grid-body"},n?r.a.createElement(k,null):r.a.createElement("div",{className:"settings"},r.a.createElement("form",{className:"post-article",onSubmit:function(t){return e.setServer(t)}},r.a.createElement("h1",{className:"settings-group-title"},"Server Details"),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{className:"fieldLabel",htmlFor:"url"},"Server URL:"),r.a.createElement("input",{required:!0,name:"url",type:"text",title:"Server URL",placeholder:"Server URL",value:o,onChange:function(t){e.setState({url:t.currentTarget.value})}})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{className:"fieldLabel",htmlFor:"port"},"Server Port:"),r.a.createElement("input",{required:!0,name:"port",type:"text",title:"Server Port",placeholder:"Server Port",value:l,onChange:function(t){e.setState({port:t.currentTarget.value})}})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{className:"fieldLabel",htmlFor:"prefix"},"Group Prefix:"),r.a.createElement("input",{required:!0,name:"prefix",type:"text",title:"Group Prefix",placeholder:"Group Prefix",value:u,onChange:function(t){e.setState({groupPrefix:t.currentTarget.value})}})),r.a.createElement("hr",null),r.a.createElement("h1",{className:"settings-group-title"},"User Details"),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{className:"fieldLabel",htmlFor:"name"},"Full Name: "),r.a.createElement("input",{required:!0,name:"name",type:"text",title:"Your Name",placeholder:"Full Name",value:s,onChange:function(t){e.setState({author:t.currentTarget.value})}})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{className:"fieldLabel",htmlFor:"url"},"E-Mail Address:"),r.a.createElement("input",{required:!0,name:"url",type:"email",title:"E-mail Address",placeholder:"E-mail Address",value:i,onChange:function(t){e.setState({email:t.currentTarget.value})}})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{className:"fieldLabel",htmlFor:"signature"},"Signature:"),r.a.createElement("textarea",{name:"signature",title:"Signature",placeholder:"Your Signature...",value:m,onChange:function(t){e.setState({signature:t.currentTarget.value})}})),r.a.createElement("div",{className:"input-group"},r.a.createElement("button",{className:"submit",type:"submit",disabled:a},a?r.a.createElement(x.a,{icon:"spinner",spin:!0}):c?"Saved!":"Save"),r.a.createElement("button",{className:"back",type:"reset",onClick:function(){return e.props.history.goBack()}},"Cancel"))))),r.a.createElement(ce,null))}}]),t}(r.a.Component),de=Object(F.h)(pe),he=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(F.d,null,r.a.createElement(F.b,{path:"/groups/:name",component:se}),r.a.createElement(F.b,{path:"/post/:name/:number?",component:le}),r.a.createElement(F.b,{path:"/settings",component:de}),r.a.createElement(F.b,{path:"/",component:me})))}}]),t}(r.a.Component),fe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ve(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var be=n(26),ge=n(70);be.b.add(K.c,K.d,K.h,K.i,K.m,K.k,K.a,K.f,K.j,ge.a,K.b,K.n,K.o,K.l,K.g),s.a.render(r.a.createElement(I.a,{basename:""},r.a.createElement(he,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/newsR",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/newsR","/service-worker.js");fe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ve(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ve(t,e)}))}}()},32:function(e){e.exports=JSON.parse('{"name":"newsr","version":"2.0.0","private":true,"homepage":"https://olliwho.github.io/newsR","dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.32","@fortawesome/free-brands-svg-icons":"^5.15.1","@fortawesome/free-solid-svg-icons":"^5.15.1","@fortawesome/react-fontawesome":"^0.1.13","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^8.1.3","@types/jest":"^24.9.1","@types/node":"^13.13.35","@types/react":"^16.14.2","@types/react-dom":"^16.9.10","@types/react-helmet":"^5.0.16","@types/react-router-dom":"^5.1.6","emailjs-mime-codec":"^2.0.9","emailjs-mime-parser":"^2.0.7","moment":"^2.29.1","newsie":"^1.1.0","node-sass":"^4.14.1","react":"^17.0.1","react-dom":"^17.0.1","react-helmet":"^5.2.1","react-media":"^1.10.0","react-router-dom":"^5.2.0","react-scripts":"3.3.0","typescript":"^3.7.5"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"gh-pages":"^2.2.0"}}')},69:function(e,t,n){e.exports=n.p+"static/media/logo.8e7cbbb2.svg"},71:function(e,t,n){e.exports=n(134)},76:function(e,t,n){},77:function(e,t,n){}},[[71,1,2]]]);
//# sourceMappingURL=main.a4dd11d4.chunk.js.map